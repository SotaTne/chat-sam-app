# 1.0 用件定義（修正版）

## 1.1 機能要件

1. **メッセージ閲覧**

   - 掲示板形式でメッセージを一覧表示できる
   - 新しい順でページングして取得できる
   - 一定間隔で新着メッセージを確認できる（ポーリング）
   - ログイン不要で閲覧可能

2. **メッセージ投稿**

   - ユーザーはセッション ID を使ってメッセージを投稿できる
   - 投稿文字数は最大 2048 文字
   - 投稿時に不正なスクリプトを無効化（XSS 対策）

3. **セッション管理**

   - 初回アクセス時にセッション ID を発行する
   - セッション ID は Cookie または localStorage で保持
   - セッションの有効期限は 3 日

4. **定期処理（Bot メッセージ）**
   - 6 時間ごとにサーバーがメッセージを集計
   - ランダムまたは生成されたメッセージを Bot として投稿
   - Bot メッセージは通常メッセージと区別可能

---

## 1.2 非機能要件

1. **セキュリティ**

   - 個人情報は扱わない（匿名掲示板形式）
   - XSS 対策を必須とする
   - セッション ID は推測困難なランダム文字列を用いる

2. **パフォーマンス**

   - 1 秒間隔で新着チェックしても負荷に耐えられる構成
   - DynamoDB のスケーラビリティを活用

3. **拡張性**

   - 今後の機能追加を見越して API は REST 形式で提供
   - ただし **WebSocket 化や管理機能の追加はしない**

4. **運用・保守**
   - Step Functions で定期処理を自動化
   - CloudWatch でエラー監視可能

---

## 1.3 システム構成

- **クライアント**: Web ブラウザ（掲示板 UI）
- **サーバー**: AWS Lambda + API Gateway
- **データストア**: DynamoDB（Messages / Sessions）
- **バッチ処理**: Step Functions + Lambda（Bot 生成）
