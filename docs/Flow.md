# 0.5 抽象的な役割定義

## 抽象的なフロー

### 1. 初期アクセス

- **クライアント**

  - 掲示板のビューを表示
  - セッション ID がなければサーバーに要求して保存

- **サーバー**
  - セッション ID を発行し返却

---

### 2. メッセージ閲覧

- **クライアント**

  - サーバーに最新メッセージ一覧を要求
  - 一覧を画面に表示
  - 定期的に新着があるか確認して追加表示

- **サーバー**
  - 保存してあるメッセージを返却
  - 新着メッセージを要求に応じて返却

---

### 3. メッセージ投稿

- **クライアント**

  - 投稿フォームに入力したメッセージを送信
  - サーバーから応答を受け取り、画面に反映

- **サーバー**
  - メッセージをサニタイズして保存
  - 保存結果を返却

---

### 4. 定期処理（Bot 生成）

- **サーバー**

  - 一定時間ごとに保存されたメッセージを集計
  - ランダムなメッセージや要約を生成して保存

- **クライアント**
  - 通常の新着取得処理で Bot メッセージを受け取り表示

---

## ポイント

- クライアントは「表示・入力・送信」に集中
- サーバーは「保存・返却・生成」に集中
- 双方のやり取りは「セッション ID + メッセージ」でつながる
